---
title: 样板页
published: true
---

查看事务等级

SELECT @@global.tx_isolation,@@tx_isolation;
REPEATABLE-READ  REPEATABLE-READ

创建表
create  table test_wl (id int PRIMARY KEY AUTO_INCREMENT, name varchar(20), num int);

REPEATABLE-READ
session1:
1. start transaction;
4. update test_wl set num = 20 where id = 1;
6. commit;

session2:
2. start transaction;
3. update test_wl set num = 20 where id = 1;
5. commit;

第4步会等待第5步执行完成才会执行


REPEATABLE-READ
session1:
1. start transaction;
3. select * from test_wl where id=1 for update;
4. update test_wl set num = 20 where id = 1;
5. commit;

session2:
2. start transaction;
4. update test_wl set num = 30 where id = 1;
6. commit;

第4步会等待第5步执行完成才会执行

REPEATABLE-READ
session1:
1. set session transaction isolation level serializable; 
3. start transaction;
5. select * from test_wl where id=1;
7. update test_wl set num = 30 where id = 1;
8. commit;

session2:
2. set session transaction isolation level serializable; 
4. start transaction;
6. update test_wl set num = 20 where id = 1;
9. commit;

session1会成功更改值 session2会报死锁的错


REPEATABLE-READ
session1:
1. set session transaction isolation level serializable; 
3. start transaction;
5. select * from test_wl where id=1;
7. update test_wl set num = 30 where id = 1;
8. commit;

session2:
2. set session transaction isolation level serializable; 
4. start transaction;
6. update test_wl set num = 20 where id = 1;
9. commit;

session1会成功更改值 session2会报死锁的错


REPEATABLE-READ
session1:
1. set session transaction isolation level serializable; 
3. start transaction;
5. select * from test_wl where id=1;
7. update test_wl set num = 40 where id = 1;
8. commit;

session2:
2. set session transaction isolation level serializable; 
4. start transaction;
6. update test_wl set num = 20 where id = 2;
9. commit;

session1和session2会成功更改值


REPEATABLE-READ
session1:
1. start transaction;
3. select * from test_wl where id=1;
5. update test_wl set num = 40 where id = 1;
7. commit;

session2:
2. start transaction;
4. update test_wl set num = 20 where id = 1;
6. commit;

5会在第6步后执行，并且覆盖值为40


修改事务隔离等级
全局
set global transaction isolation level serializable;
会话
 set session transaction isolation level serializable;

文本你可以**加粗**, _斜体_, 和~~删除~~ 或者`关键字`

[也可以加个链接](www.baidu.com)

# [](#header-1)标题一

## [](#header-2)标题二

> 这是一个块引用
>
> 足够重要的事都可以加块引用

### [](#header-3)标题三

```js
// Js 代码高亮展示
var fun = function lang(l) {
  dateformat.i18n = require('./lang/' + l)
  return true;
}
```

```ruby
# Ruby 代码高亮展示
GitHubPages::Dependencies.gems.each do |gem, version|
  s.add_dependency(gem, "= #{version}")
end
```

#### [](#header-4)标题四

*   这是一个无序列表
*   这是一个无序列表
*   这是一个无序列表

##### [](#header-5)标题五

1.  这是一个有序列表
2.  这是一个有序列表
3.  这是一个有序列表

###### [](#header-6)标题六

| head1        | head two          | three |
|:-------------|:------------------|:------|
| ok           | good swedish fish | nice  |
| out of stock | good and plenty   | nice  |
| ok           | good `oreos`      | hmm   |
| ok           | good `zoute` drop | yumm  |

### 下面是一个分割线

* * *

### 下面是一个无序列表:

*   Item foo
*   Item bar
*   Item baz
*   Item zip

### 下面是一个有序列表:

1.  Item one
1.  Item two
1.  Item three
1.  Item four

### 下面是一个嵌套的列表

- level 1 item
  - level 2 item
  - level 2 item
    - level 3 item
    - level 3 item
- level 1 item
  - level 2 item
  - level 2 item
  - level 2 item
- level 1 item
  - level 2 item
  - level 2 item
- level 1 item

### 小图

![](https://assets-cdn.github.com/images/icons/emoji/octocat.png)

### 大图

![](https://guides.github.com/activities/hello-world/branching.png)


### 使用HTML语义定义列表

<dl>
<dt>Name</dt>
<dd>Godzilla</dd>
<dt>Born</dt>
<dd>1952</dd>
<dt>Birthplace</dt>
<dd>Japan</dd>
<dt>Color</dt>
<dd>Green</dd>
</dl>

```
很长的单行代码块，不应该折叠。而是可以拉动，足够长的行才可以拉动，太短的不行，下面那条就是太短
```

```
太短的代码块
```
